(this["webpackJsonppokemon-web-app"]=this["webpackJsonppokemon-web-app"]||[]).push([[0],{101:function(e,t,n){},106:function(e,t,n){},107:function(e,t,n){},112:function(e,t,n){},113:function(e,t,n){},114:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(3),o=n.n(c),s=n(84),i=n.n(s),l=(n(41),n(94)),r=n(117),m=n(12),d=n(10),j=n(95),b=n(85),u=n(30),O=n(86),h=(n(101),n.p+"static/media/logo.3e1660a9.svg"),p=n.p+"static/media/compass.9af2d6b7.png",v=n.p+"static/media/backpack.ff1378cd.png",g="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAQAAABLCVATAAAATUlEQVRIie3MOxEAIBAD0RSU+KNEAlIQggyEwTF8DOQaZrLbP0Cdiu3CDJumNrNOPkxHFCNGDM0A9UENgYFEiRJFUpmDLlVZZlMuzFdNO/WPEVqT7vQAAAAASUVORK5CYII=";function f(e){var t=e.img,n=e.text;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("img",{src:t,className:"img-item",alt:t}),Object(a.jsx)("p",{className:"navbar-text",children:n})]})}var k=function(){var e=Object(c.useState)(!1),t=Object(u.a)(e,2),n=t[0],o=t[1],s=Object(c.useState)([]),i=Object(u.a)(s,2),l=i[0],r=i[1],k=Object(d.g)(),x=Object(O.useMediaQuery)({query:"(max-width: 960px)"});return Object(c.useEffect)((function(){return k.listen((function(e){"PUSH"===k.action&&r([e.key]),o("/pokemon-details"===k.location.pathname),"POP"===k.action&&(l[1]===e.key?"/my-pokemon-action"===e.pathname?k.replace("/"):r((function(e){var t=Object(b.a)(e);t[0];return t.slice(1)})):"/my-pokemon-action"===e.pathname?k.replace("/"):r((function(t){return[e.key].concat(Object(j.a)(t))})))}))}),[l,k]),Object(c.useEffect)((function(){"/my-pokemon-action"===k.location.pathname&&window.addEventListener("beforeunload",k.replace("/"))}),[k]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("nav",{className:!n&&x?"display-none":"navbar",children:Object(a.jsxs)("div",{className:"navbar-container",children:[Object(a.jsx)(m.b,{to:"/",className:n&&x?"display-none":"navbar-logo",children:Object(a.jsx)("img",{src:h,className:"img-logo",alt:"logo"})}),Object(a.jsxs)("ul",{className:x?"navbar-menu flex-start":"navbar-menu",children:[Object(a.jsx)("li",{className:n&&x?"navbar-item":"display-none",children:Object(a.jsx)("div",{className:"navbar-links back",onClick:function(){k.goBack()},children:Object(a.jsx)(f,{img:g,text:"BACK"})})}),Object(a.jsx)("li",{className:n&&x?"display-none":"navbar-item",children:Object(a.jsx)(m.c,{className:"navbar-links",to:"/",exact:!0,children:Object(a.jsx)(f,{img:p,text:"EXPLORE"})})}),Object(a.jsx)("li",{className:n&&x?"display-none":"navbar-item",children:Object(a.jsx)(m.c,{className:"navbar-links",to:"/my-pokemon-list",children:Object(a.jsx)(f,{img:v,text:"MY POKEMON LIST"})})})]})]})}),Object(a.jsx)("nav",{className:n||x?"navbar-bottom":"display-none",children:Object(a.jsx)("div",{className:"navbar-container",children:Object(a.jsxs)("ul",{className:"navbar-menu",children:[Object(a.jsx)("li",{className:n&&!x?"display-none":"navbar-item",children:Object(a.jsx)(m.c,{className:"navbar-links",to:"/",exact:!0,children:Object(a.jsx)(f,{img:p,text:"EXPLORE"})})}),Object(a.jsx)("li",{className:n&&!x?"display-none":"navbar-item",children:Object(a.jsx)(m.c,{className:"navbar-links",to:"/my-pokemon-list",children:Object(a.jsx)(f,{img:v,text:"MY POKEMON LIST"})})})]})})})]})},x=n(28),A=n(29),N=n(37),y=n(36),E=n(58),P=n(25),w=n.n(P);function S(){var e=Object(E.a)(["\n  query pokemon($name: String!) {\n    pokemon(name: $name) {\n      id @client\n      name @client\n      sprites {\n        front_default @client\n      }\n      abilities {\n        ability {\n          name @client\n        }\n      }\n      moves {\n        move {\n          name @client\n        }\n      }\n      types {\n        type {\n          name @client\n        }\n      }\n    }\n  }\n"]);return S=function(){return e},e}function C(){var e=Object(E.a)(["\n  query pokemon($name: String!) {\n    pokemon(name: $name) {\n      id\n      name\n      sprites {\n        front_default\n      }\n      abilities {\n        ability {\n          name\n        }\n      }\n      moves {\n        move {\n          name\n        }\n      }\n      types {\n        type {\n          name\n        }\n      }\n    }\n  }\n"]);return C=function(){return e},e}function I(){var e=Object(E.a)(["\n  query pokemons($limit: Int, $offset: Int) {\n    pokemons(limit: $limit, offset: $offset) {\n      results {\n        id\n        name\n        image\n      }\n    }\n  }\n"]);return I=function(){return e},e}var R=w()(I()),B=w()(C()),F=(w()(S()),n.p+"static/media/open_pokeball.327609e2.png"),D=n.p+"static/media/pokeball.9fc0eeae.png";n(106);var Q=function(e){var t=e.text;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"loading-container",children:[Object(a.jsx)("div",{className:"loading-image-container",children:Object(a.jsx)("img",{className:"loading-image",src:D,alt:D})}),t&&Object(a.jsx)("div",{className:"loading-text",children:t})]})})};n(107);function L(e){var t=e.pokemon;console.log(t);var n=void 0!==t.myPokemonId;return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{className:"card",children:Object(a.jsxs)("div",{className:"card-container",children:[Object(a.jsxs)(m.b,{to:{pathname:"/pokemon-details",state:{pokemon:t}},className:"card-link",children:[n&&t.sprites?Object(a.jsx)("img",{src:t.sprites.front_default,className:"card-img",alt:t.name}):Object(a.jsx)("img",{src:t.image,className:"card-img",alt:t.name}),Object(a.jsx)("div",{className:"card-title",children:t.name})]},t.id),n?Object(a.jsxs)(m.b,{to:{pathname:"/my-pokemon-action",state:{pokemon:t,isCatching:!1}},className:"button-container button card-link",children:[Object(a.jsx)("img",{className:"card-button-img",src:F,alt:F}),Object(a.jsx)("div",{className:"card-button-text",children:"RELEASE"})]}):Object(a.jsxs)("div",{className:"card-owned-text",children:["OWNED: ",t.count]})]})})})}var M=function(e){var t=e.pokemons,n=Object(d.g)(),o=!!n&&"/my-pokemon-list"===n.location.pathname,s=Object(c.useState)(t),i=Object(u.a)(s,2),l=i[0],m=i[1],j=Object(c.useState)(20),b=Object(u.a)(j,2),O=b[0],h=b[1],p=Object(r.useQuery)(R,{variables:{limit:O,offset:0},skip:o}),v=p.loading,g=p.data,f=(g=void 0===g?{}:g).pokemons,k=(f=void 0===f?{}:f).results,x=void 0===k?[]:k,A=p.error;return Object(c.useEffect)((function(){v||o||(m(x),console.log(l))}),[v,o,x,l]),A?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Q,{}),"ERROR!"]}):(l&&!o&&l.forEach((function(e){var n=0;t.forEach((function(t){e.id===t.id&&(n++,console.log("".concat(e.name," count: ").concat(n)))})),e.count=n})),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"cards-container",children:l&&l.map((function(e){return Object(a.jsx)(L,{pokemon:e},o?e.myPokemonId:e.id)}))}),!o&&Object(a.jsx)("div",{className:"button-container",children:v?Object(a.jsx)(Q,{}):Object(a.jsx)("div",{className:"button",onClick:function(){h(O+20)},children:"Load more"})})]}))},U=n(90),q=n.n(U).a.open("POKEMONS",1,(function(e){e.createObjectStore("Pokemons",{keyPath:"myPokemonId"}).createIndex("myPokemonId","myPokemonId",{unique:!1})})),Y=new(function(){function e(){Object(x.a)(this,e)}return Object(A.a)(e,[{key:"catchPokemon",value:function(e){q.then((function(t){var n=t.transaction("Pokemons","readwrite"),a=n.objectStore("Pokemons");return console.log(e),a.put(e),n.complete})).then((function(){console.log("Pokemon catched.")}))}},{key:"releasePokemon",value:function(e){q.then((function(t){var n=t.transaction("Pokemons","readwrite"),a=n.objectStore("Pokemons");return console.log(e),a.delete(e),n.complete})).then((function(){console.log("Pokemon released.")}))}},{key:"getMyPokemons",value:function(){return new Promise((function(e){q.then((function(e){return e.transaction("Pokemons","readonly").objectStore("Pokemons").getAll()})).then((function(t){e(t),console.log("Got your Pokemons!")}))}))}},{key:"getMyPokemonById",value:function(e){return new Promise((function(t){q.then((function(t){return t.transaction("Pokemons","readonly").objectStore("Pokemons").get(e)})).then((function(e){t(e),console.log("Got the Pokemon!")}))}))}}]),e}()),K=function(e){Object(N.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e)).state={data:[]},a.getPokemons(),a}return Object(A.a)(n,[{key:"getPokemons",value:function(){var e=this;Y.getMyPokemons().then((function(t){e.setState({data:t})}))}},{key:"render",value:function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(M,{pokemons:this.state.data})})}}]),n}(o.a.Component),T=function(e){Object(N.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e)).state={data:[]},a.getPokemons(),a}return Object(A.a)(n,[{key:"getPokemons",value:function(){var e=this;Y.getMyPokemons().then((function(t){e.setState({data:t})}))}},{key:"render",value:function(){return this.state.data.length>0?Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(M,{pokemons:this.state.data})}):Object(a.jsx)(Q,{text:"You have no Pokemons yet!"})}}]),n}(o.a.Component),W=n(47),G=(n(112),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAkElEQVR4Ae3OgQWAYBiE4QYIEBogNEIIbdE4jdB4jdAA/wB/hwPFJ/B1cccLDp7mJ/O8Dq2oVcDMqKCKDtRrYNDXqOGBEUDtqAaoNgMxovklas3AnKi8QBXUZWAqC1D8sjAR6htMjBqSMTEqBZMA0sQYY4wxxhjDbToYgnQwBOlgCNLBECSD4Rai7k1Ifp53AbHE8jDp7bA+AAAAAElFTkSuQmCC");var V=function(e){console.log(e.pokemon);var t=e?e.pokemon:null;console.log(t);var n=!!t&&(!!t.pokemon&&!!t.pokemon.myPokemonId);console.log(n);var o=Object(c.useState)(t?t.pokemon:null),s=Object(u.a)(o,2),i=s[0],l=s[1];console.log(i);var d=Object(c.useState)(i?i.name:null),j=Object(u.a)(d,2),b=j[0],O=j[1],h=Object(r.useQuery)(B,{variables:{name:b},skip:n}),p=h.loading,v=h.data,g=(v=void 0===v?{}:v).pokemon,f=void 0===g?[]:g,k=Object(c.useState)(!1),x=Object(u.a)(k,2),A=x[0],N=x[1],y=Object(c.useRef)();return Object(c.useEffect)((function(){A&&y.current.focus()}),[A]),Object(c.useEffect)((function(){l((function(e){return Object(W.a)(Object(W.a)({},e),{},{name:b})}))}),[b]),Object(c.useEffect)((function(){p||(console.log(f),n||(l(f),console.log(i)))}),[p]),p?Object(a.jsx)(Q,{}):Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"details-container",children:[Object(a.jsxs)("div",{className:"details-header",children:[i.sprites?Object(a.jsx)("img",{src:i.sprites.front_default,className:"details-img",alt:"item"}):null,Object(a.jsxs)("form",{className:"details-name-container",children:[Object(a.jsx)("input",{className:A?"details-name":"details-name center",type:"text",ref:y,value:i.name?i.name:"",onChange:function(e){var t=e.target.value;O(t),console.log(i.name)},onKeyDown:function(e){13===e.keyCode&&E()},disabled:A?"":"disabled"}),n?Object(a.jsx)("div",{onClick:function(){A?E():(N(!0),y.current.focus())},className:"details-edit-container",children:Object(a.jsx)("img",{src:G,alt:G,className:"details-edit"})}):null]}),i.types?Object(a.jsx)("div",{className:"details-types-container",children:Object(a.jsx)("div",{className:"details-values",children:i.types.map((function(e){return Object(a.jsx)("div",{className:"details-value ".concat(e.type.name),children:e.type.name},e.type.name)}))})}):null]}),Object(a.jsxs)("div",{className:"details",children:[i.abilities?Object(a.jsxs)("div",{className:"details-pokemon-container",children:[Object(a.jsx)("div",{className:"details-title",children:"ABILITIES"}),Object(a.jsx)("div",{className:"details-values",children:i.abilities.map((function(e){return Object(a.jsx)("div",{className:"details-value",children:e.ability.name},e.ability.name)}))})]}):null,i.moves?Object(a.jsxs)("div",{className:"details-pokemon-container",children:[Object(a.jsx)("div",{className:"details-title",children:"MOVES"}),Object(a.jsx)("div",{className:"details-values",children:i.moves.map((function(e){return Object(a.jsx)("div",{className:"details-value",children:e.move.name},e.move.name)}))})]}):null]}),Object(a.jsx)("div",{className:A?"details-button-container hide":"details-button-container",children:n?Object(a.jsx)(m.b,{to:{pathname:"/my-pokemon-action",state:{pokemon:i,isCatching:!1}},className:"card-link",children:Object(a.jsxs)("div",{className:"details-button",children:[Object(a.jsx)("img",{src:F,className:"details-button-img",alt:F}),Object(a.jsx)("div",{className:"details-button-text",children:"RELEASE"})]})},i.id):Object(a.jsx)(m.b,{to:{pathname:"/my-pokemon-action",state:{pokemon:i,isCatching:!0}},className:"card-link",children:Object(a.jsxs)("div",{className:"details-button",children:[Object(a.jsx)("img",{src:D,className:"details-button-img",alt:D}),Object(a.jsx)("div",{className:"details-button-text",children:"CATCH"})]})},i.id)})]})});function E(){l(Object(W.a)(Object(W.a)({},i),{},{name:i.name})),console.log(i),Y.catchPokemon(i),N(!1)}},J=function(e){Object(N.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e)).state={data:e.location?e.location.state:{}},a}return Object(A.a)(n,[{key:"render",value:function(){if(!this.state.data)return Object(a.jsx)(d.a,{to:"/"});console.log(this.state.data);var e=this.state.data;return console.log(e),Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(V,{pokemon:e})})}}]),n}(o.a.Component),$="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAW0lEQVR4Ae3OgQWAIRBA4R8/QgO0ZaM0SGM0ROPUReAIkDt5jwfA970e5b0bzNhnRxh7VJC7wpijEihQoO4EChSoKLcDqIABswIDBgwYg365esFolD1GoxSGaAKRQaqRlGw8/QAAAABJRU5ErkJggg==",Z=n.p+"static/media/footprints.187beaa7.png",_=n.p+"static/media/gotcha.e52aa4c3.png",H=(n(113),n(118));var X=function(e){var t=e.pokemon,n=e.isCatching,c=Math.random()<.5;return n?c&&(t.myPokemonId=Object(H.a)(),Y.catchPokemon(t)):t&&Y.releasePokemon(t.myPokemonId),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"action-pokemon-container",children:[Object(a.jsx)("div",{className:"action-pokemon-image-container",children:Object(a.jsx)("img",{className:"action-pokemon-image",src:n&&c?_:Z,alt:n&&c?_:Z})}),Object(a.jsx)("div",{className:"action-pokemon-title",children:n&&c?"SUCCESSFUL!":n?"FAILED!":"RELEASED!"}),Object(a.jsx)("div",{className:"action-pokemon-subtitle",children:n&&c?"Gotta catch em' all!":n?"It ran away...":"Goodbye friend!"}),Object(a.jsx)("div",{className:"action-pokemon-button-container",children:n&&c?Object(a.jsx)(m.b,{className:"action-pokemon-button",to:{pathname:"/pokemon-details",state:{pokemon:t}},children:Object(a.jsx)("img",{src:$,alt:$})}):Object(a.jsx)(m.b,{className:"action-pokemon-button",to:{pathname:"/"},children:Object(a.jsx)("img",{src:g,alt:g})})})]})})},z=function(e){Object(N.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(x.a)(this,n),a=t.call(this,e),console.log(e),a.state={data:e.location?e.location.state:null},a}return Object(A.a)(n,[{key:"render",value:function(){if(console.log(void 0===this.state.data),void 0===this.state.data)return Object(a.jsx)(d.a,{to:"/"});console.log(this.state.data);var e=this.state.data?this.state.data.pokemon:null,t=this.state.data?this.state.data.isCatching:null;return console.log(e),!t&e&&Y.releasePokemon(e.myPokemonId),Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(X,{pokemon:e,isCatching:t})})}}]),n}(o.a.Component);var ee=function(){var e=new l.a({uri:"https://graphql-pokeapi.vercel.app/api/graphql"});return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(r.ApolloProvider,{client:e,children:Object(a.jsxs)(m.a,{basename:"/pokemon-web-app",children:[Object(a.jsx)(k,{}),Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)(d.d,{children:[Object(a.jsx)(d.b,{path:"/",exact:!0,component:K}),Object(a.jsx)(d.b,{path:"/my-pokemon-list",exact:!0,component:T}),Object(a.jsx)(d.b,{path:"/pokemon-details",exact:!0,component:J}),Object(a.jsx)(d.b,{path:"/my-pokemon-action",exact:!0,component:z})]})})]})})})},te=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ne(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ae=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,119)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),o(e),s(e)}))};i.a.render(Object(a.jsx)(ee,{}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/pokemon-web-app",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/pokemon-web-app","/service-worker.js");te?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ne(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):ne(t,e)}))}}(),ae()},41:function(e,t,n){}},[[114,1,2]]]);
//# sourceMappingURL=main.bc254af8.chunk.js.map