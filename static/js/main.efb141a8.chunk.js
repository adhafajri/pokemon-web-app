(this["webpackJsonppokemon-web-app"]=this["webpackJsonppokemon-web-app"]||[]).push([[0],{101:function(e,n,t){},106:function(e,n,t){},107:function(e,n,t){},112:function(e,n,t){},113:function(e,n,t){},114:function(e,n,t){"use strict";t.r(n);var a=t(2),c=t(3),o=t.n(c),s=t(84),i=t.n(s),l=(t(41),t(94)),r=t(117),m=t(12),d=t(10),j=t(95),b=t(85),u=t(30),O=t(86),h=(t(101),t.p+"static/media/logo.3e1660a9.svg"),p=t.p+"static/media/compass.9af2d6b7.png",g=t.p+"static/media/backpack.ff1378cd.png",v="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAQAAABLCVATAAAATUlEQVRIie3MOxEAIBAD0RSU+KNEAlIQggyEwTF8DOQaZrLbP0Cdiu3CDJumNrNOPkxHFCNGDM0A9UENgYFEiRJFUpmDLlVZZlMuzFdNO/WPEVqT7vQAAAAASUVORK5CYII=";function f(e){var n=e.img,t=e.text;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("img",{src:n,className:"img-item",alt:n}),Object(a.jsx)("p",{className:"navbar-text",children:t})]})}var k=function(){var e=Object(c.useState)(!1),n=Object(u.a)(e,2),t=n[0],o=n[1],s=Object(c.useState)([]),i=Object(u.a)(s,2),l=i[0],r=i[1],k=Object(d.g)(),x=Object(O.useMediaQuery)({query:"(max-width: 960px)"});return Object(c.useEffect)((function(){return k.listen((function(e){"PUSH"===k.action&&r([e.key]),o("/pokemon-details"===k.location.pathname),"POP"===k.action&&(l[1]===e.key?"/my-pokemon-action"===e.pathname?k.replace("/"):r((function(e){var n=Object(b.a)(e);n[0];return n.slice(1)})):"/my-pokemon-action"===e.pathname?k.replace("/"):r((function(n){return[e.key].concat(Object(j.a)(n))})))}))}),[l,k]),Object(c.useEffect)((function(){"/my-pokemon-action"===k.location.pathname&&window.addEventListener("beforeunload",k.replace("/"))}),[k]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("nav",{className:!t&&x?"display-none":"navbar",children:Object(a.jsxs)("div",{className:"navbar-container",children:[Object(a.jsx)(m.b,{to:"/",className:t&&x?"display-none":"navbar-logo",children:Object(a.jsx)("img",{src:h,className:"img-logo",alt:"logo"})}),Object(a.jsxs)("ul",{className:x?"navbar-menu flex-start":"navbar-menu",children:[Object(a.jsx)("li",{className:t&&x?"navbar-item":"display-none",children:Object(a.jsx)("div",{className:"navbar-links back",onClick:function(){k.goBack()},children:Object(a.jsx)(f,{img:v,text:"BACK"})})}),Object(a.jsx)("li",{className:t&&x?"display-none":"navbar-item",children:Object(a.jsx)(m.c,{className:"navbar-links",to:"/",exact:!0,children:Object(a.jsx)(f,{img:p,text:"EXPLORE"})})}),Object(a.jsx)("li",{className:t&&x?"display-none":"navbar-item",children:Object(a.jsx)(m.c,{className:"navbar-links",to:"/my-pokemon-list",children:Object(a.jsx)(f,{img:g,text:"MY POKEMON LIST"})})})]})]})}),Object(a.jsx)("nav",{className:t||x?"navbar-bottom":"display-none",children:Object(a.jsx)("div",{className:"navbar-container",children:Object(a.jsxs)("ul",{className:"navbar-menu",children:[Object(a.jsx)("li",{className:t&&!x?"display-none":"navbar-item",children:Object(a.jsx)(m.c,{className:"navbar-links",to:"/",exact:!0,children:Object(a.jsx)(f,{img:p,text:"EXPLORE"})})}),Object(a.jsx)("li",{className:t&&!x?"display-none":"navbar-item",children:Object(a.jsx)(m.c,{className:"navbar-links",to:"/my-pokemon-list",children:Object(a.jsx)(f,{img:g,text:"MY POKEMON LIST"})})})]})})})]})},x=t(28),A=t(29),N=t(37),y=t(36),E=t(58),P=t(25),w=t.n(P);function S(){var e=Object(E.a)(["\n  query pokemon($name: String!) {\n    pokemon(name: $name) {\n      id @client\n      name @client\n      sprites {\n        front_default @client\n      }\n      abilities {\n        ability {\n          name @client\n        }\n      }\n      moves {\n        move {\n          name @client\n        }\n      }\n      types {\n        type {\n          name @client\n        }\n      }\n    }\n  }\n"]);return S=function(){return e},e}function C(){var e=Object(E.a)(["\n  query pokemon($name: String!) {\n    pokemon(name: $name) {\n      id\n      name\n      sprites {\n        front_default\n      }\n      abilities {\n        ability {\n          name\n        }\n      }\n      moves {\n        move {\n          name\n        }\n      }\n      types {\n        type {\n          name\n        }\n      }\n    }\n  }\n"]);return C=function(){return e},e}function I(){var e=Object(E.a)(["\n  query pokemons($limit: Int, $offset: Int) {\n    pokemons(limit: $limit, offset: $offset) {\n      results {\n        id\n        name\n        image\n      }\n    }\n  }\n"]);return I=function(){return e},e}var R=w()(I()),B=w()(C()),F=(w()(S()),t.p+"static/media/open_pokeball.327609e2.png"),D=t.p+"static/media/pokeball.9fc0eeae.png";t(106);var Q=function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{className:"loading-container",children:Object(a.jsx)("div",{className:"loading-image-container",children:Object(a.jsx)("img",{className:"loading-image",src:D,alt:D})})})})};t(107);function L(e){var n=e.pokemon;console.log(n);var t=void 0!==n.myPokemonId;return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{className:"card",children:Object(a.jsxs)("div",{className:"card-container",children:[Object(a.jsxs)(m.b,{to:{pathname:"/pokemon-details",state:{pokemon:n}},className:"card-link",children:[t&&n.sprites?Object(a.jsx)("img",{src:n.sprites.front_default,className:"card-img",alt:n.name}):Object(a.jsx)("img",{src:n.image,className:"card-img",alt:n.name}),Object(a.jsx)("div",{className:"card-title",children:n.name})]},n.id),t?Object(a.jsxs)(m.b,{to:{pathname:"/my-pokemon-action",state:{pokemon:n,isCatching:!1}},className:"button-container button card-link",children:[Object(a.jsx)("img",{className:"card-button-img",src:F,alt:F}),Object(a.jsx)("div",{className:"card-button-text",children:"RELEASE"})]}):Object(a.jsxs)("div",{className:"card-owned-text",children:["OWNED: ",n.count]})]})})})}var M=function(e){var n=e.pokemons,t=Object(d.g)(),o=!!t&&"/my-pokemon-list"===t.location.pathname,s=Object(c.useState)(n),i=Object(u.a)(s,2),l=i[0],m=i[1],j=Object(c.useState)(20),b=Object(u.a)(j,2),O=b[0],h=b[1],p=Object(r.useQuery)(R,{variables:{limit:O,offset:0},skip:o}),g=p.loading,v=p.data,f=(v=void 0===v?{}:v).pokemons,k=(f=void 0===f?{}:f).results,x=void 0===k?[]:k,A=p.error;return Object(c.useEffect)((function(){g||o||(m(x),console.log(l))}),[g,o,x,l]),A?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Q,{}),"ERROR!"]}):(l&&!o&&l.forEach((function(e){var t=0;n.forEach((function(n){e.id===n.id&&(t++,console.log("".concat(e.name," count: ").concat(t)))})),e.count=t})),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"cards-container",children:l&&l.map((function(e){return Object(a.jsx)(L,{pokemon:e},o?e.myPokemonId:e.id)}))}),!o&&Object(a.jsx)("div",{className:"button-container",children:g?Object(a.jsx)(Q,{}):Object(a.jsx)("div",{className:"button",onClick:function(){h(O+20)},children:"Load more"})})]}))},U=t(90),q=t.n(U).a.open("POKEMONS",1,(function(e){e.createObjectStore("Pokemons",{keyPath:"myPokemonId"}).createIndex("myPokemonId","myPokemonId",{unique:!1})})),K=new(function(){function e(){Object(x.a)(this,e)}return Object(A.a)(e,[{key:"catchPokemon",value:function(e){q.then((function(n){var t=n.transaction("Pokemons","readwrite"),a=t.objectStore("Pokemons");return console.log(e),a.put(e),t.complete})).then((function(){console.log("Pokemon catched.")}))}},{key:"releasePokemon",value:function(e){q.then((function(n){var t=n.transaction("Pokemons","readwrite"),a=t.objectStore("Pokemons");return console.log(e),a.delete(e),t.complete})).then((function(){console.log("Pokemon released.")}))}},{key:"getMyPokemons",value:function(){return new Promise((function(e){q.then((function(e){return e.transaction("Pokemons","readonly").objectStore("Pokemons").getAll()})).then((function(n){e(n),console.log("Got your Pokemons!")}))}))}},{key:"getMyPokemonById",value:function(e){return new Promise((function(n){q.then((function(n){return n.transaction("Pokemons","readonly").objectStore("Pokemons").get(e)})).then((function(e){n(e),console.log("Got the Pokemon!")}))}))}}]),e}()),T=function(e){Object(N.a)(t,e);var n=Object(y.a)(t);function t(e){var a;return Object(x.a)(this,t),(a=n.call(this,e)).state={data:[]},a.getPokemons(),a}return Object(A.a)(t,[{key:"getPokemons",value:function(){var e=this;K.getMyPokemons().then((function(n){e.setState({data:n})}))}},{key:"render",value:function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(M,{pokemons:this.state.data})})}}]),t}(o.a.Component),Y=function(e){Object(N.a)(t,e);var n=Object(y.a)(t);function t(e){var a;return Object(x.a)(this,t),(a=n.call(this,e)).state={data:[]},a.getPokemons(),a}return Object(A.a)(t,[{key:"getPokemons",value:function(){var e=this;K.getMyPokemons().then((function(n){e.setState({data:n})}))}},{key:"render",value:function(){return this.state.data.length>0?Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(M,{pokemons:this.state.data})}):Object(a.jsx)(Q,{})}}]),t}(o.a.Component),W=t(47),G=(t(112),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAkElEQVR4Ae3OgQWAYBiE4QYIEBogNEIIbdE4jdB4jdAA/wB/hwPFJ/B1cccLDp7mJ/O8Dq2oVcDMqKCKDtRrYNDXqOGBEUDtqAaoNgMxovklas3AnKi8QBXUZWAqC1D8sjAR6htMjBqSMTEqBZMA0sQYY4wxxhjDbToYgnQwBOlgCNLBECSD4Rai7k1Ifp53AbHE8jDp7bA+AAAAAElFTkSuQmCC");var V=function(e){console.log(e.pokemon);var n=e?e.pokemon:null;console.log(n);var t=!!n&&(!!n.pokemon&&!!n.pokemon.myPokemonId);console.log(t);var o=Object(c.useState)(n?n.pokemon:null),s=Object(u.a)(o,2),i=s[0],l=s[1];console.log(i);var d=Object(c.useState)(i?i.name:null),j=Object(u.a)(d,2),b=j[0],O=j[1],h=Object(r.useQuery)(B,{variables:{name:b},skip:t}),p=h.loading,g=h.data,v=(g=void 0===g?{}:g).pokemon,f=void 0===v?[]:v,k=Object(c.useState)(!1),x=Object(u.a)(k,2),A=x[0],N=x[1],y=Object(c.useRef)();return Object(c.useEffect)((function(){A&&y.current.focus()}),[A]),Object(c.useEffect)((function(){l((function(e){return Object(W.a)(Object(W.a)({},e),{},{name:b})}))}),[b]),Object(c.useEffect)((function(){p||(console.log(f),t||(l(f),console.log(i)))}),[p]),p?Object(a.jsx)(Q,{}):Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"details-container",children:[Object(a.jsxs)("div",{className:"details-header",children:[i.sprites?Object(a.jsx)("img",{src:i.sprites.front_default,className:"details-img",alt:"item"}):null,Object(a.jsxs)("form",{className:"details-name-container",children:[Object(a.jsx)("input",{className:A?"details-name":"details-name center",type:"text",ref:y,value:i.name?i.name:"",onChange:function(e){var n=e.target.value;O(n),console.log(i.name)},onKeyDown:function(e){13===e.keyCode&&E()},disabled:A?"":"disabled"}),t?Object(a.jsx)("div",{onClick:function(){A?E():(N(!0),y.current.focus())},className:"details-edit-container",children:Object(a.jsx)("img",{src:G,alt:G,className:"details-edit"})}):null]}),i.types?Object(a.jsx)("div",{className:"details-types-container",children:Object(a.jsx)("div",{className:"details-values",children:i.types.map((function(e){return Object(a.jsx)("div",{className:"details-value ".concat(e.type.name),children:e.type.name},e.type.name)}))})}):null]}),Object(a.jsxs)("div",{className:"details",children:[i.abilities?Object(a.jsxs)("div",{className:"details-pokemon-container",children:[Object(a.jsx)("div",{className:"details-title",children:"ABILITIES"}),Object(a.jsx)("div",{className:"details-values",children:i.abilities.map((function(e){return Object(a.jsx)("div",{className:"details-value",children:e.ability.name},e.ability.name)}))})]}):null,i.moves?Object(a.jsxs)("div",{className:"details-pokemon-container",children:[Object(a.jsx)("div",{className:"details-title",children:"MOVES"}),Object(a.jsx)("div",{className:"details-values",children:i.moves.map((function(e){return Object(a.jsx)("div",{className:"details-value",children:e.move.name},e.move.name)}))})]}):null]}),Object(a.jsx)("div",{className:A?"details-button-container hide":"details-button-container",children:t?Object(a.jsx)(m.b,{to:{pathname:"/my-pokemon-action",state:{pokemon:i,isCatching:!1}},className:"card-link",children:Object(a.jsxs)("div",{className:"details-button",children:[Object(a.jsx)("img",{src:F,className:"details-button-img",alt:F}),Object(a.jsx)("div",{className:"details-button-text",children:"RELEASE"})]})},i.id):Object(a.jsx)(m.b,{to:{pathname:"/my-pokemon-action",state:{pokemon:i,isCatching:!0}},className:"card-link",children:Object(a.jsxs)("div",{className:"details-button",children:[Object(a.jsx)("img",{src:D,className:"details-button-img",alt:D}),Object(a.jsx)("div",{className:"details-button-text",children:"CATCH"})]})},i.id)})]})});function E(){l(Object(W.a)(Object(W.a)({},i),{},{name:i.name})),console.log(i),K.catchPokemon(i),N(!1)}},J=function(e){Object(N.a)(t,e);var n=Object(y.a)(t);function t(e){var a;return Object(x.a)(this,t),(a=n.call(this,e)).state={data:e.location?e.location.state:{}},a}return Object(A.a)(t,[{key:"render",value:function(){if(!this.state.data)return Object(a.jsx)(d.a,{to:"/"});console.log(this.state.data);var e=this.state.data;return console.log(e),Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(V,{pokemon:e})})}}]),t}(o.a.Component),$="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAW0lEQVR4Ae3OgQWAIRBA4R8/QgO0ZaM0SGM0ROPUReAIkDt5jwfA970e5b0bzNhnRxh7VJC7wpijEihQoO4EChSoKLcDqIABswIDBgwYg365esFolD1GoxSGaAKRQaqRlGw8/QAAAABJRU5ErkJggg==",Z=t.p+"static/media/footprints.187beaa7.png",_=t.p+"static/media/gotcha.e52aa4c3.png",H=(t(113),t(118));var X=function(e){var n=e.pokemon,t=e.isCatching,c=Math.random()<.5;return t?c&&(n.myPokemonId=Object(H.a)(),K.catchPokemon(n)):n&&K.releasePokemon(n.myPokemonId),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"action-pokemon-container",children:[Object(a.jsx)("div",{className:"action-pokemon-image-container",children:Object(a.jsx)("img",{className:"action-pokemon-image",src:t&&c?_:Z,alt:t&&c?_:Z})}),Object(a.jsx)("div",{className:"action-pokemon-title",children:t&&c?"SUCCESSFUL!":t?"FAILED!":"RELEASED!"}),Object(a.jsx)("div",{className:"action-pokemon-subtitle",children:t&&c?"Gotta catch em' all!":t?"It ran away...":"Goodbye friend!"}),Object(a.jsx)("div",{className:"action-pokemon-button-container",children:t&&c?Object(a.jsx)(m.b,{className:"action-pokemon-button",to:{pathname:"/pokemon-details",state:{pokemon:n}},children:Object(a.jsx)("img",{src:$,alt:$})}):Object(a.jsx)(m.b,{className:"action-pokemon-button",to:{pathname:"/"},children:Object(a.jsx)("img",{src:v,alt:v})})})]})})},z=function(e){Object(N.a)(t,e);var n=Object(y.a)(t);function t(e){var a;return Object(x.a)(this,t),a=n.call(this,e),console.log(e),a.state={data:e.location?e.location.state:null},a}return Object(A.a)(t,[{key:"render",value:function(){if(console.log(void 0===this.state.data),void 0===this.state.data)return Object(a.jsx)(d.a,{to:"/"});console.log(this.state.data);var e=this.state.data?this.state.data.pokemon:null,n=this.state.data?this.state.data.isCatching:null;return console.log(e),!n&e&&K.releasePokemon(e.myPokemonId),Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(X,{pokemon:e,isCatching:n})})}}]),t}(o.a.Component);var ee=function(){var e=new l.a({uri:"https://graphql-pokeapi.vercel.app/api/graphql"});return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(r.ApolloProvider,{client:e,children:Object(a.jsxs)(m.a,{basename:"/pokemon-web-app",children:[Object(a.jsx)(k,{}),Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)(d.d,{children:[Object(a.jsx)(d.b,{path:"/",exact:!0,component:T}),Object(a.jsx)(d.b,{path:"/my-pokemon-list",exact:!0,component:Y}),Object(a.jsx)(d.b,{path:"/pokemon-details",exact:!0,component:J}),Object(a.jsx)(d.b,{path:"/my-pokemon-action",exact:!0,component:z})]})})]})})})},ne=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function te(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ae=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,119)).then((function(n){var t=n.getCLS,a=n.getFID,c=n.getFCP,o=n.getLCP,s=n.getTTFB;t(e),a(e),c(e),o(e),s(e)}))};i.a.render(Object(a.jsx)(ee,{}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/pokemon-web-app",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/pokemon-web-app","/service-worker.js");ne?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var a=t.headers.get("content-type");404===t.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):te(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):te(n,e)}))}}(),ae()},41:function(e,n,t){}},[[114,1,2]]]);
//# sourceMappingURL=main.efb141a8.chunk.js.map